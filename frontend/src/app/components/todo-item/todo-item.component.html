<mat-card class="todo-item">
  <div class="todo-header" (click)="toggleExpand()">
    <div class="todo-main">
      <mat-checkbox
        [checked]="todo.completed"
        (change)="onStatusChange($event.checked)"
        (click)="$event.stopPropagation()"
      >
      </mat-checkbox>
      <span class="title" [class.completed]="todo.completed">{{
        todo.title
      }}</span>
    </div>

    <span class="material-icons expand-icon" [class.expanded]="isExpanded">
      expand_more
    </span>
  </div>

  <div class="todo-details" *ngIf="isExpanded">
    <p class="description" *ngIf="todo.description">{{ todo.description }}</p>
    <p class="due-date" *ngIf="todo.due_date">
      Due: {{ dateService.formatForDisplay(todo.due_date) }}
    </p>
    <div class="actions">
      <button mat-button color="warn" (click)="onDelete()">
        <span class="material-icons">delete</span>
        Delete
      </button>
    </div>
  </div>
</mat-card>
